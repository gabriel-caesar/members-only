<% locals.messages.forEach(message => { %>

  <div
    style="
      border: 1px solid #33c733;
      border-radius: 6px;
      padding: 6px;
      margin-bottom: 1rem;
    "
  >

    <li style="color: #0e800e; list-style: none"><%= message.title %></li>
    <p><%= message.content %></p>

    <% if (locals.user && locals.user.member) { %>
      <div>
        <span style="color: #272787">Date:</span> 
        <%= new Date(message.date).toLocaleString("en-US", {
          timeZone: "America/New_York"
        }) %>
      </div>

      <div style="margin-bottom: 8px">
        <span style="color: #272787">Author:</span> <%= message.firstname %> <%=
        message.lastname %>
      </div>
    <% } %> 

    <% if (locals.user && locals.user.id === message.user_id) { %>
      <a href="/messages/edit/<%= message.id %>">Edit message</a>
    <% } %>
    
    <% if (locals.user && locals.user.admin) { %>
      <form action="/messages/delete/<%= message.id %>" method='POST' style='margin-top: 10px'>
        <button
          type='submit'
          style="color: red"
          onclick='return confirm("Are you sure you want to delete this message?")'
        >
          Delete message
        </button>
      </form>
    <% } %> 

  </div>

<% }) %>
